# RDBMS 선택

## 1. 개요

### 1.1 소개

---

관계형 데이터베이스 시스템을 사용하기로 결정했다면 어떤 DBMS를 사용해야 할까? `MySQL`, `Oracle`, `MS-SQL`, `MariaDB`, `PostgreSQL` 등 세간에는 다양한 RDBMS 제품이 존재한다. 각 제품들 모두 각기 다른 장단점을 가지고 있으며, 위에서 언급한 데이터베이스 모두 '2024년 세계에서 가장 인기있는 DBMS 탑10' 안에 위치하는 제품들이다. 그렇다면 끊임없이 변하는 데이터베이스 시장에서 어떤 기준으로 DB를 선택해야 할 지 알아보도록 하자.

<br>

![alt text](<./image/Screenshot 2024-08-26 at 10.43.46 AM.png>)

<br>

### 1.2 고민

---

인맥사무소 프로젝트에서 팀원들과 데이터베이스 선정에 대해 다음과 같은 논의를 거쳤다. 

<br>

![alt text](<./image/Screenshot 2024-08-27 at 10.57.59 AM.png>)

<br>

최종적인 후보로 `MySQL`, `PostgreSQL`, `MariaDB`가 거론되었다. 먼저 우리 서비스는 복잡한 쿼리를 사용하는 기능보다 단순 조회 기능이 주이기 때문에 단순 조회 기능이 조금은 더 우세한 `MySQL`과 `MariaDB` 중에서 선택하기로 했다.

<br>

![alt text](<./image/Screenshot 2024-08-27 at 11.14.30 AM.png>)

<br>

전체적인 성능상으로는 `MariaDB`가 조금 더 우세했지만, 적은 레퍼런스와 팀원들의 익숙함을 정도를 이유로 `MySQL`을 선택하기로 했다.

## 2. 선정 기준

이러한 논의를 바탕으로 데이터베이스를 선정하였지만, 조금 더 정형화된 선정 기준이 있으면 좋을 것 같다는 생각을 하게 되었다. 다음은 오라클의 한 DBA가 제시한 데이터베이스 선정 기준을 간단하게 정리한 내용이다.

### 2.1 비용

---

실제 서비스를 운영할 때 결국 가장 먼저 고려해야 할 사항은 비용일 것이라 생각한다. 데이터베이스 구축 및 운영에 소요되는 비용은 다음과 같은 기준을 바탕으로 고려할 수 있다.

* 오픈 소스 또는 라이선스가 필요한 데이터베이스 기술인가?
* 현재 데이터베이스 서버를 확장하는 데 드는 비용은 얼마인가?
* 구독료, 사용료 등 제품 비용은 얼마인가?

### 2.2 서비스 수준 협약(SLA)

---

해당 개념은 데이터베이스 복구, 즉 백업과 연관이 있는 개념이다. 목표한 시간 내에 데이터 복구를 진행할 수 있는 정도를 나타내는 지표와 연관이 있다. 사실 정확한 이해가 어려워 조금 더 알아보아야할 항목인 것 같다.

* 다중 노드 클러스터 지원을 제공하는가?
* 재해 복구 솔루션이 있는가?
* 백업에서 고객 데이터를 복원하는 데 걸리는 시간은 얼마나 되는가?

### 2.3 서드파티와의 호환성

---

데이터베이스 중 특정 클라우드나 운영체제에서만 지원하는 제품이 있다. 또 어떤 경우 특정 언어는 지원을 하지 않는 데이터베이스도 있다. 이러한 점을 염두하여 현재 사용중인 서비스의 스택과 호환성을 고려해서 데이터베이스를 결정해야 한다.

* Linux, Windows 등 여러 운영 체제 지원이 필요한가?
* AWS, Google, Microsoft 등 주요 클라우드 공급업체의 지원을 받아야 하는가?
* SQL 언어 지원이 필요한가?
* Java, C, C++, Python 등의 프로그래밍 언어를 지원해야 하는가?
* XML, JSON, 공간 데이터 및 비정형 데이터 지원이 필요한가?

### 2.4 데이터 모델

---

같은 관계형 데이터베이스라고 해도 제품마다 제공하는 데이터 모델이 모두 일치하지는 않는다. 엔티티 간의 연관관계, 정규화 필요성, 쿼리 복잡도 등 특정 데이터 모델링 기능에 특화된 데이터베이스가 있다.

* ACID 지원이 필요한가?
* 제한된 쿼리 패턴이 필요한가?
* 복잡한 쿼리, 저장 프로시저, 뷰가 없는가?
* 데이터베이스의 정규화가 필요한가?
* 데이터 모델을 확장하는 것이 쉬운가?
* 단일 큰 테이블 모델이 필요한가?
* Create, Read, Update, Delete(CRUD) 작업 지원이 필요한가?
* 서로 다른 엔터티 간의 관계 정도는 어떠한가?

### 2.5 복제, 쿼리 성능

---

데이터베이스의 복제 또는 쿼리 성능은 서비스의 사용자 경험과 직결된 부분으로 제품마다 성능 특성을 고려하여 서비스의 성격에 맞는 제품을 선택해야 한다. 다음과 같은 사항을 고려할 수 있다.

* 데이터를 파티셔닝할 수 있는가?
* 복제 방법은 Master-Master 또는 Master-Slave 중 어떤 것을 사용할 것인가?
* 인메모리 기능이 있는가?
* 분석 기능이 필요한가?
* 대량의 데이터를 읽기 모드로만 분석해야 하는가?
* 분산 컴퓨팅 및 저장이 필요한가?
* 복잡한 동적 쿼리에 저장 프로시저나 뷰가 필요한가?
